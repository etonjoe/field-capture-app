<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>FieldCapture</title><style>body{font-family:sans-serif;margin:1em}img,video{width:300px;margin-bottom:1em}.submission{border:1px solid #ccc;padding:1em;margin-top:1em}textarea{width:100%;margin:.5em 0}.emoji{cursor:pointer;margin-right:.5em}</style><script defer="defer" src="/field-capture-app/static/js/main.42cb417f.js"></script><link href="/field-capture-app/static/css/main.102ef2e8.css" rel="stylesheet"></head><body><h1>📸 FieldCapture App</h1><video id="preview" autoplay muted></video><br/><button onclick="capturePhoto()">📷 Take Photo</button> <button onclick="startRecording()">🎥 Start Recording</button> <button onclick="stopRecording()">🛑 Stop</button><br/><br/><img id="snapshot"/><video id="playback" controls style="display:none"></video><div><textarea id="comment" placeholder="Add a comment..."></textarea> <button onclick="addComment()">➕ Add Comment</button></div><div id="commentsList"></div><button onclick="submitMedia()">✅ Submit with Location</button><h2>🗺️ Submissions:</h2><div id="submissions"></div><script>let mediaStream,recorder,chunks=[],currentComments=[];function capturePhoto(){const e=document.getElementById("preview"),t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0),document.getElementById("snapshot").src=t.toDataURL("image/png")}function startRecording(){chunks=[],recorder=new MediaRecorder(mediaStream),recorder.ondataavailable=e=>chunks.push(e.data),recorder.onstop=()=>{const e=new Blob(chunks,{type:"video/webm"}),t=document.getElementById("playback");t.src=URL.createObjectURL(e),t.style.display="block"},recorder.start()}function stopRecording(){recorder.stop()}function addComment(){const e=document.getElementById("comment").value.trim();if(e){currentComments.push(e);const t=document.getElementById("commentsList"),n=document.createElement("div");n.textContent="💬 "+e,t.appendChild(n),document.getElementById("comment").value=""}}function submitMedia(){navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude.toFixed(4),n=e.coords.longitude.toFixed(4),o=document.getElementById("snapshot").src,c=document.getElementById("playback").src,d=document.createElement("div");if(d.className="submission",o){const e=new Image;e.src=o,d.appendChild(e)}if(c){const e=document.createElement("video");e.src=c,e.controls=!0,e.width=300,d.appendChild(e)}const m=document.createElement("div");m.textContent=`📍 Lat: ${t}, Lon: ${n}`,d.appendChild(m);const a=document.createElement("div");currentComments.forEach(e=>{const t=document.createElement("div");t.textContent="💬 "+e,a.appendChild(t)}),d.appendChild(a);const i=document.createElement("div");["👍","❤️","😂","🔥"].forEach(e=>{const t=document.createElement("span");t.textContent=e,t.className="emoji",t.onclick=()=>alert(`Reacted with ${e}`),i.appendChild(t)}),d.appendChild(i),document.getElementById("submissions").appendChild(d),currentComments=[],document.getElementById("commentsList").innerHTML=""})}navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{mediaStream=e,document.getElementById("preview").srcObject=e})</script></body></html>